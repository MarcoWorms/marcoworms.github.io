(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{3:function(e,t,a){e.exports=a(9)},8:function(e,t,a){},9:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(2),r=a.n(s);a(8);class i extends l.a.Component{constructor(e){super(e),this.state={url:"",query:"",results:[],lastResult:"",fetchInterval:0,intervalId:0}}once(){this.setState({loading:"fetching url..."}),fetch(this.state.url).then(e=>(this.setState({loading:"parsing html..."}),e.text())).then(e=>(new DOMParser).parseFromString(e,"text/html")).then(e=>(this.setState({loading:"applying selector..."}),{timestamp:new Date,value:e.querySelector(this.state.query).innerText})).then(e=>this.setState({results:this.state.results.concat(e)})).catch(e=>console.error(e))}interval(){this.setState({intervalId:window.setInterval(()=>this.once(),1e3*this.state.fetchInterval)})}stopInterval(){window.clearInterval(this.state.intervalId),this.setState({intervalId:0})}render(){return l.a.createElement("div",{className:"App"},l.a.createElement("h1",null,"Scrape Log 0.1"),l.a.createElement("textarea",{class:"small-input",placeholder:"URL",onChange:e=>this.setState({url:"https://cors-anywhere.herokuapp.com/"+e.target.value})}),l.a.createElement("textarea",{class:"small-input",placeholder:"Query Selector",onChange:e=>this.setState({query:e.target.value})}),l.a.createElement("button",{class:"small-input",onClick:this.once.bind(this)},"Fetch Once"),l.a.createElement("div",null,l.a.createElement("button",{onClick:this.interval.bind(this),disabled:!!this.state.intervalId},"Fetch Repeatedly"),l.a.createElement("button",{onClick:this.stopInterval.bind(this),disabled:!this.state.intervalId},"stop"),l.a.createElement("input",{type:"number",placeholder:"Interval (seconds)",onChange:e=>this.setState({fetchInterval:e.target.value})})),l.a.createElement("h2",null,"Results"),l.a.createElement("div",null,this.state.results.map(e=>l.a.createElement("div",null,e.timestamp.toLocaleDateString()," ",e.timestamp.toLocaleTimeString(),l.a.createElement("br",null),e.value,l.a.createElement("br",null),l.a.createElement("br",null)))))}}const c=document.getElementById("root");r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(i,null)),c)}},[[3,1,2]]]);
//# sourceMappingURL=main.b8f77b8c.chunk.js.map