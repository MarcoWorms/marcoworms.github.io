(this["webpackJsonpkanbanza-front"]=this["webpackJsonpkanbanza-front"]||[]).push([[0],{199:function(t,e,n){},201:function(t,e,n){"use strict";n.r(e);var i=n(1),c=n.n(i),o=n(76),r=n.n(o),a=n(21),s=n(2),d=n(204),l=n(25),u=n.n(l),j=n(81),b=n(4),f=n(79),O=n(80),w=n.n(O),p=(n(199),n(3)),h=Object(s.a)(Object(s.a)({},u.a),{},{buttons:Object(s.a)(Object(s.a)({},u.a.buttons),{},{primary:Object(s.a)(Object(s.a)({},u.a.buttons.primary),{},{color:"#666",backgroundColor:"#eee",cursor:"pointer","&:hover":{backgroundColor:"#666",color:"#eee"},"&:disabled":{opacity:.2}}),secondary:Object(s.a)(Object(s.a)({},u.a.buttons.secondary),{},{cursor:"pointer","&:hover":{backgroundColor:"blue"}}),warning:{color:"#222",backgroundColor:"rgb(255, 150, 150)",cursor:"pointer","&:hover":{backgroundColor:"red",color:"black"}},outline:Object(s.a)(Object(s.a)({},u.a.buttons.outline),{},{color:"#666",backgroundColor:"#eee",cursor:"pointer","&:hover":{backgroundColor:"#666",color:"#eee"}})})}),m=function(t){var e=Object(i.useState)(!1),n=Object(a.a)(e,2),c=n[0],o=n[1],r=Object(i.useState)(""),s=Object(a.a)(r,2),d=s[0],l=s[1],u=function(t){var e=Object(i.useState)(!1),n=Object(a.a)(e,2),c=n[0],o=n[1];function r(e){e.key===t&&o(!0)}var s=function(e){e.key===t&&o(!1)};return Object(i.useEffect)((function(){return window.addEventListener("keydown",r),window.addEventListener("keyup",s),function(){window.removeEventListener("keydown",r),window.removeEventListener("keyup",s)}}),[]),c}("Enter");return Object(i.useEffect)((function(){c&&u&&(o(!1),t.onEdit&&t.onEdit(d))}),[u]),c?Object(p.jsx)(f.a,{m:3,width:"92%",height:t.height,maxWidth:t.maxWidth,autoFocus:!0,onChange:function(t){return l(t.target.value)},value:d,onBlur:function(){o(!1),t.onEdit&&t.onEdit(d)}}):Object(p.jsx)(b.a,{onClick:function(){l(t.children.props.children),o(!0)},children:t.children})},k=function(t){return Object(p.jsxs)(b.c,{minWidth:400,maxWidth:400,m:2,p:2,children:[Object(p.jsxs)(b.d,{justifyContent:"space-between",alignItems:"flex-start",children:[Object(p.jsx)(m,{onEdit:function(e){return D(t.flow,t.task,{title:e},t.setFlow)},maxWidth:260,children:Object(p.jsx)(b.e,{as:"h3",m:2,fontSize:3,className:"wrapHard",maxWidth:270,children:t.title})}),t.editing?Object(p.jsx)(b.b,{variant:"warning",ml:2,onClick:function(){window.confirm("Are you sure?")&&A(t.flow,t.task,t.setFlow)},children:"Delete"}):Object(p.jsxs)(b.d,{children:[Object(p.jsx)(b.b,{variant:"primary",onClick:function(){return C(t.flow,t.task,t.setFlow)},disabled:0===t.stepIndex,children:"<"}),Object(p.jsx)(b.b,{variant:"primary",ml:2,onClick:function(){return y(t.flow,t.task,t.setFlow)},disabled:t.stepIndex===t.flow.steps.length-1,children:">"})]})]}),Object(p.jsx)(m,{height:200,onEdit:function(e){return D(t.flow,t.task,{description:e},t.setFlow)},children:Object(p.jsx)(w.a,{children:t.description})})]})},x=function(t){return Object(p.jsxs)(b.d,{flexDirection:"column",minWidth:420,m:2,className:"wrapHard",children:[Object(p.jsx)(m,{onEdit:function(e){return I(t.flow,t.step,{title:e},t.setFlow)},children:Object(p.jsx)(b.e,{as:"h2",m:1,mt:3,mb:t.editing?2:4,textAlign:"center",fontSize:5,children:t.title})}),t.editing&&Object(p.jsxs)(b.d,{justifyContent:"center",children:[Object(p.jsx)(b.b,{variant:"primary",ml:4,children:"<"}),Object(p.jsx)(b.b,{variant:"primary",ml:2,children:">"}),Object(p.jsx)(b.b,{variant:"warning",ml:2,onClick:function(){window.confirm("Are you sure?")&&S(t.flow,t.step,t.setFlow)},children:"Delete"})]}),Object(p.jsx)(b.d,{alignItems:"center",flexDirection:"column",children:t.children})]})},g=function(t){return Object(p.jsxs)(b.d,{flexDirection:"column",m:2,children:[Object(p.jsx)(b.d,{justifyContent:"center",children:Object(p.jsx)(m,{children:Object(p.jsx)(b.e,{as:"h1",mb:4,mt:3,fontSize:6,children:t.flow.title})})}),Object(p.jsxs)(b.d,{justifyContent:"center",mb:3,children:[Object(p.jsx)(b.b,{variant:"secondary",onClick:function(){return E(t.flow,t.setFlow)},children:"Create Task"}),Object(p.jsx)(b.b,{variant:"secondary",ml:2,onClick:function(){return F(t.flow,t.setFlow)},children:"Create Step"}),Object(p.jsx)(b.b,{variant:"secondary",ml:2,onClick:function(){return t.setEditing(!t.editing)},children:"Edit Flow"}),Object(p.jsx)(b.b,{variant:"outline",ml:2,children:"View Metrics"})]}),Object(p.jsx)(b.d,{children:t.flow.steps.map((function(e,n){return Object(i.createElement)(x,Object(s.a)(Object(s.a)({editing:t.editing},e),{},{flow:t.flow,setFlow:t.setFlow,key:e.id,step:e}),t.flow.tasks.filter((function(t){return t.step===e.id})).slice().sort((function(t,e){return e.updatedAt-t.updatedAt})).map((function(e){return Object(i.createElement)(k,Object(s.a)(Object(s.a)({editing:t.editing},e),{},{flow:t.flow,setFlow:t.setFlow,stepIndex:n,key:e.id,task:e}))})))}))})]})},v=function(t){var e=Object(i.useState)(!1),n=Object(a.a)(e,2),o=n[0],r=n[1],s=function(t,e){var n=c.a.useState((function(){var n=window.localStorage.getItem(e);return null!==n?JSON.parse(n):t})),i=Object(a.a)(n,2),o=i[0],r=i[1];return c.a.useEffect((function(){window.localStorage.setItem(e,JSON.stringify(o))}),[e,o]),[o,r]}({title:"Main Flow",steps:[{id:Object(d.a)(),createdAt:Date.now(),updatedAt:Date.now(),title:"Todo"},{id:Object(d.a)(),createdAt:Date.now(),updatedAt:Date.now(),title:"Doing"},{id:Object(d.a)(),createdAt:Date.now(),updatedAt:Date.now(),title:"Done"}],tasks:[]}),l=Object(a.a)(s,2),u=l[0],f=l[1];return Object(p.jsx)(j.a,{theme:h,children:Object(p.jsx)(b.a,{variant:"styles.root",overflowX:"auto",children:Object(p.jsx)(g,{editing:o,setEditing:r,flow:u,setFlow:f})})})},y=function(t,e,n){t.steps.forEach((function(i,c){i.id===e.step&&n(Object(s.a)(Object(s.a)({},t),{},{tasks:t.tasks.map((function(n){return n.id===e.id?Object(s.a)(Object(s.a)({},e),{},{step:t.steps[c+1].id,updatedAt:Date.now()}):n}))}))}))},C=function(t,e,n){t.steps.forEach((function(i,c){i.id===e.step&&n(Object(s.a)(Object(s.a)({},t),{},{tasks:t.tasks.map((function(n){return n.id===e.id?Object(s.a)(Object(s.a)({},e),{},{step:t.steps[c-1].id,updatedAt:Date.now()}):n}))}))}))},E=function(t,e){e(Object(s.a)(Object(s.a)({},t),{},{tasks:t.tasks.concat({id:Object(d.a)(),title:"A new task!",description:"a **markdown** *powered* description",step:t.steps[0].id,createdAt:Date.now(),updatedAt:Date.now(),deletedAt:null})}))},A=function(t,e,n){n(Object(s.a)(Object(s.a)({},t),{},{tasks:t.tasks.map((function(t){return t.id===e.id?void 0:t})).filter((function(t){return t}))}))},D=function(t,e,n,i){i(Object(s.a)(Object(s.a)({},t),{},{tasks:t.tasks.map((function(t){return t.id===e.id?Object(s.a)(Object(s.a)(Object(s.a)({},e),n),{},{updatedAt:Date.now()}):t}))}))},F=function(t,e){e(Object(s.a)(Object(s.a)({},t),{},{steps:t.steps.concat({id:Object(d.a)(),title:"New Step",createdAt:Date.now(),updatedAt:Date.now(),deletedAt:null})}))},S=function(t,e,n){n(Object(s.a)(Object(s.a)({},t),{},{steps:t.steps.map((function(t){return t.id===e.id?void 0:t})).filter((function(t){return t})),tasks:t.tasks.map((function(t){return t.step===e.id?void 0:t})).filter((function(t){return t}))}))},I=function(t,e,n,i){i(Object(s.a)(Object(s.a)({},t),{},{steps:t.steps.map((function(t){return t.id===e.id?Object(s.a)(Object(s.a)(Object(s.a)({},e),n),{},{updatedAt:Date.now()}):t}))}))};var W=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,205)).then((function(e){var n=e.getCLS,i=e.getFID,c=e.getFCP,o=e.getLCP,r=e.getTTFB;n(t),i(t),c(t),o(t),r(t)}))};r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(v,{})}),document.getElementById("root")),W()}},[[201,1,2]]]);
//# sourceMappingURL=main.867e14dc.chunk.js.map